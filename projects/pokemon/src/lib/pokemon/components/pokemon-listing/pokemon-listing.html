<div class="container">
  <!-- État de chargement -->
  @if (pokemonList().loading) {
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Chargement...</span>
    </div>
  }

  <!-- Erreur -->
  @if (pokemonList().error) {
    <div class="alert alert-danger">
      {{ pokemonList().error }}
    </div>
  }

  <!-- Chargé -->
  @if (pokemonList().data) {
    <!-- Pagination -->
    <div class="d-flex align-items-center justify-content-center gap-3 my-4">
      <button
        class="btn btn-sm btn-outline-primary"
        [disabled]="offset === 0"
        (click)="prevPage()">
        ‹
      </button>

      <span>{{ offset + 1 }} - {{ offset + limit > total ? total : offset + limit }}</span>
      <span class="text-muted"> / {{ total }}</span>

      <button
        class="btn btn-sm btn-outline-primary"
        [disabled]="offset + limit >= total"
        (click)="nextPage()">
        ›
      </button>
    </div>

    <!-- Liste -->
    <div class="row">
      @for (p of pokemonList().data?.results; track p.name) {
        <div class="col-md-3" (click)="selectPokemon(p.name)">
          <div class="card mb-3">
            <div class="card-header">
              <h5 class="card-title text-center">{{ p.name | titlecase }}</h5>
              <div class="d-flex align-items-center justify-content-center gap-2">
                @for (s of getPokemonSummary(p.name).stats?.slice(0,3); track s.stat.name) {
                  <span class="badge text-bg-dark" [title]="s.stat.name">{{ s.stat.name | statEmoji }} {{ s.base_stat }}</span>
                }
              </div>
            </div>
            <img class="card-img-top" [src]="getPokemonSummary(p.name).img" [alt]="p.name" />
            <div class="card-footer d-flex align-items-center justify-content-center gap-2">
              @for (t of getPokemonSummary(p.name).types; track t.slot) {
                <span [ngClass]="'type-' + t.type.name" class="badge rounded-pill">{{ t.type.name }}</span>
              }
            </div>
          </div>
        </div>
      }
    </div>
        <!-- Pagination -->
    <div class="d-flex align-items-center justify-content-center gap-3 my-4">
      <button
        class="btn btn-sm btn-outline-primary"
        [disabled]="offset === 0"
        (click)="prevPage()">
        Précédent
      </button>

      <span>{{ offset + 1 }} - {{ offset + limit > total ? total : offset + limit }}</span>
      <span class="text-muted"> / {{ total }}</span>

      <button
        class="btn btn-sm btn-outline-primary"
        [disabled]="offset + limit >= total"
        (click)="nextPage()">
        Suivant
      </button>
    </div>

  }
</div>

